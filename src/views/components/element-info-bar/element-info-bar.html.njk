{# -------------- #}
{#  ELEMENT INFO  #}
{# -------------- #}
<li id="element-info-{{ element.id }}" 
    class="element-item" 
    data-element-id="{{ element.id }}">

  {# HEADER #}
  <div class="collapsible-header bgdSoftColorAs {{pendingClass}}" option-id={{mainOptionValueToDisplay.colorOptionId}}>
    
    {# Header Title #}
    <div class='collapsible-header-title row'> 

      <span class="col s12 name">

      {% set mainIcon = 'icon-attention' if showPending else mainOptionValueToDisplay.option.icon %}
        {# Icons #}
        <span class="element-main-icon icon {{ mainIcon }} colorAs {{pendingClass}} hideOnLargeScreen" option-id={{mainOptionValueToDisplay.colorOptionId}}></span>
        <span class="star-names-icons">
          {% for starName in starNames %} 
              <span class="icon icon-{{starName}}"></span>
            {% endfor %}
        </span>   
           
        {# Distance and Close Button #}
        <span class="icon icon-close" id="btn-close-bandeau-detail"></span>
        {% if showDistance and element.distance != null %}
          <span class="right-align distance">~ {{ element.distance }} km</span>
        {% endif %}

        {# Name #}
        {{ element.getProperty('name')|safe }}
        {% if element.isDeleted() %}</br><u>(En cours de suppression)</u>{% endif %}
 
      </span>
      
    </div>

    {# Header More #}
    <div class='collapsible-header-more row'>

      {# Description #}
      <span class="description col s12">{{ element.getProperty('description')|safe }}</span> 

      {# Categories litteral #}
      <span class="inline-option-values col s8 hideOnLargeScreen">

        {% for optionValue in allOptionsValues %} 
            {% set isDisabled =   '' if optionValue.isFilledByFilters else 'disabled' %}
            <span class="option-value {{ isDisabled }}">{{ optionValue.option.name|capitalize }} {% if not loop.last %}, {% endif %}</span>            
        {% endfor %}

      </span>      

      {# Select as Representant (constellation mode) #}
      <span class="col s4 right-align btn-select-as-representant-container" style="display:none">
        <button class="btn btn-select-as-representant waves-effect waves-light" >Sélectionner</button> 
      </span>

      {# Representant Label(constellation mode) #}
      <span class="col s4 right-align starRespresentantLabel" style="display:none">Element principal</span>

      {# Toggle Details Buttons #}
      <a><span class="col s4 right-align moreInfos hideOnLargeScreen">Plus d'infos</span></a>
      <a><span class="col s4 right-align lessInfos hideOnLargeScreen" style="display:none">Moins d'infos</span></a>

    </div>    

  </div>

  {# INTERACTIVE SECTION #}
  <div class="interactive-section">  
      {% if showPending %}
      <div class="vote-section">
        <span class="basic-message">
          <span class="icon-attention"></span>
          <span class="text">{{ 'Nouvel Acteur' if element.status == ElementStatus.PendingAdd else 'Modifications' }} en cours de validation</span>
          <span class="btn-vote-more-info validation-process-info" onclick='$("#modal-contribution").openModal()'>EN SAVOIR PLUS</span>
          <span class="vote-button btn btn-vote waves-effect waves-light">{{ 'Décider' if isAdmin else 'Voter' }}</span>
        </span>        
      </div>
      {% endif %}
      <div class="result-message" style="display:none"></div>
  </div>

  {# MENU #}
  <div class="menu-element bgdSoftColorAs {{pendingClass}}" option-id={{mainOptionValueToDisplay.colorOptionId}}>  
    
    {% if not isIframe %} 
    <div class="menu-element-item item-add-favorite" style="display:none">
      <span class="menu-icon icon-star-empty icon-favorite tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Enregistrer comme favoris"></span>
      <span class="menu-element-item-text">Enregistrer</span>
    </div>
    <div class="menu-element-item item-remove-favorite" style="display:none">
      <span class="menu-icon icon-star-full icon-favorite tooltipped"
      data-position="top" data-delay="0" data-tooltip="Retirer des favoris"></span>
      <span class="menu-element-item-text favorite">Enregistré</span>
    </div>
    {% endif %}
    
    <div class="menu-element-item item-share">
      <span class="menu-icon icon-share-alt tooltipped"
      data-position="top" data-delay="0" data-tooltip="Partager l'URL"></span>
      <span class="menu-element-item-text">Partager l'URL</span>
    </div>
    <div class="menu-element-item item-directions">
      <span class="menu-icon icon-directions tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Itinéraire vers cet élément"></span>
      <span class="menu-element-item-text">Itinéraire</span>
    </div>

    {% if not element.isPending() or isAdmin %} 
      <div class="menu-element-item item-edit">
        {% set editText = 'Modifier' if isAdmin else 'Proposer des modifications' %}
        <a href={{ editUrl }} {% if isIframe %}target="_blank"{% endif %}>
        <span class="menu-icon icon-edit tooltipped" 
        data-position="top" data-delay="0" data-tooltip="{{ editText }}"></span>
        <span class="menu-element-item-text">{{ editText }}</span></a>
      </div>
    {% endif %}

    <div class="menu-element-item item-report"> 
      <span class="menu-icon btn-report icon-exclamation-1 tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Signaler une erreur"></span>
      <span class="menu-element-item-text">Signaler une erreur</span>
    </div>  

    <div class="menu-element-item item-delete"> 
      <span class="menu-icon btn-delete icon-delete tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Supprimer"></span>
      <span class="menu-element-item-text">Supprimer</span>
    </div>  

    {% if not element.isPending() or (isAdmin and element.status == ElementStatus.PendingModification) %} 
      
    {% endif %}        
  </div>

  {# BODY #}
  <div class="collapsible-body moreDetails custom-scroll-bar">

    {# Body Main Container #}
    <div class="collapsible-body-main-content"> 

      {# Contact infos #}
      <h3>Informations générales</h3>   
      <div class="section row sectionInfos">

        {# Address #}
        <span class="col s12 address">{{ element.getProperty('address')|safe }}</span>
        
        {# Tel #}
        {% if element.tel %}
          <span class="col s12 tel">{{ element.getProperty('tel')|safe }}</span>
        {% endif %}

        {# Mail #}
        {% if element.mail %}
          <span class="col s12 tel"><a href="mailto:{{ element.mail }}">{{  element.getProperty('mail')|safe }}</a>
          </span>
        {% endif %}

        {# WebSite #}
        {% if element.webSite %}
          <span class="col s12 tel"><a href="{{ element.webSite }}" target="_blank">{{ element.getProperty('webSite')|safe }}</a>
          </span>
        {% endif %}

      </div>
      <div class="divider"></div>
      
      {# Categories  #}
      <h3>catégories</h3> 
      <div class="section row categories">
        {% import 'components/element-info-bar/element-info-category-value.html.njk' as categoryRenderer %}
        {{ categoryRenderer.renderCategoryValue(mainCategoryValue, 1) }}
      </div>
      <div class="divider"></div>

      {# Open Hours #}
      <h3>Horaires d'ouverture</h3>   
      <div class="section row sectionOpenHours">  
        {% set count = 0 %} 

        {% for key, horaire in element.getFormatedOpenHours() %} 
          {% if horaire != null %}

            <div class='row'>
              <span class="col s3 day">{{ key|capitalize }}</span>
              <span class="col s9 openHours">{{ horaire }} </span>
            </div>
            {% set count = count + 1 %} 

          {% endif %}
        {% endfor %}          

        {% if element.openHoursMoreInfos %}
          <div class='col' {% if count != 0 %}style="margin-top:1rem;"{% endif %}>{{ element.getProperty('openHoursMoreInfos')|safe }}</div> 
          {% set count = count + 1 %} 
        {% endif %}

        {% if count == 0 %}<div class='col'> Non renseignées </div>{% endif %}       
      </div> 
    </div>
  </div> {# end BODY #}

</li>

